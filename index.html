<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Multi-Servi√ßos Pro</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
  body { display: flex; height: 100vh; background: #0a0e27; color: #e0e6ed; overflow: hidden; }
  
  .sidebar { 
    width: 80px; 
    background: linear-gradient(180deg, #0f1420 0%, #1a1f3a 100%); 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    padding: 20px 0; 
    box-shadow: 2px 0 10px rgba(0,0,0,0.5);
  }
  
  .sidebar button { 
    background: none; 
    border: none; 
    color: #8b93a7; 
    font-size: 24px; 
    margin: 15px 0; 
    cursor: pointer; 
    transition: all 0.3s ease;
    padding: 12px;
    border-radius: 8px;
    position: relative;
  }
  
  .sidebar button.active, .sidebar button:hover { 
    color: #00d4aa; 
    background: rgba(0,212,170,0.1);
    transform: translateX(5px);
  }
  
  .sidebar button:hover::after {
    content: attr(title);
    position: absolute;
    left: 70px;
    background: #1a1f3a;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
  }
  
  .main { 
    flex: 1; 
    padding: 30px; 
    overflow-y: auto;
    background: #0a0e27;
  }
  
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #1a1f3a;
  }
  
  .header h1 { 
    color: #ffffff; 
    font-size: 28px;
    font-weight: 600;
  }
  
  .datetime { 
    color: #8b93a7; 
    font-size: 14px;
  }
  
  .service { display: none; }
  .service.active { display: block; }
  
  .card { 
    background: linear-gradient(135deg, #13192e 0%, #1a1f3a 100%);
    padding: 25px; 
    margin-bottom: 20px; 
    border-radius: 12px; 
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    border: 1px solid #1a1f3a;
  }
  
  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .metric-card {
    background: linear-gradient(135deg, #1a1f3a 0%, #13192e 100%);
    padding: 20px;
    border-radius: 10px;
    border: 1px solid #2a3150;
    transition: all 0.3s ease;
  }
  
  .metric-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,212,170,0.2);
    border-color: #00d4aa;
  }
  
  .metric-card h3 {
    color: #8b93a7;
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 10px;
    text-transform: uppercase;
  }
  
  .metric-card .value {
    font-size: 32px;
    font-weight: bold;
    color: #00d4aa;
    margin-bottom: 5px;
  }
  
  .metric-card .change {
    font-size: 12px;
    color: #00d4aa;
  }
  
  .metric-card .change.negative {
    color: #ff5370;
  }
  
  h2 { 
    margin-bottom: 20px; 
    color: #ffffff; 
    font-size: 22px;
    font-weight: 600;
  }
  
  input, textarea, select { 
    padding: 12px; 
    margin: 8px 0; 
    width: 100%; 
    border-radius: 8px; 
    border: 1px solid #2a3150; 
    background: #0f1420;
    color: #e0e6ed;
    font-size: 14px;
    transition: all 0.3s ease;
  }
  
  input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: #00d4aa;
    box-shadow: 0 0 0 3px rgba(0,212,170,0.1);
  }
  
  button.primary { 
    cursor: pointer; 
    background: linear-gradient(135deg, #00d4aa 0%, #00a87d 100%);
    border: none; 
    color: #ffffff; 
    font-weight: 600; 
    border-radius: 8px; 
    padding: 12px 24px; 
    transition: all 0.3s ease;
    font-size: 14px;
  }
  
  button.primary:hover { 
    background: linear-gradient(135deg, #00a87d 0%, #008c66 100%);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,212,170,0.3);
  }
  
  button.secondary {
    cursor: pointer;
    background: transparent;
    border: 1px solid #2a3150;
    color: #8b93a7;
    font-weight: 500;
    border-radius: 8px;
    padding: 10px 20px;
    transition: all 0.3s ease;
    font-size: 14px;
  }
  
  button.secondary:hover {
    border-color: #00d4aa;
    color: #00d4aa;
    background: rgba(0,212,170,0.05);
  }
  
  .input-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
  }
  
  .result-box {
    background: rgba(0,212,170,0.1);
    border: 1px solid #00d4aa;
    padding: 20px;
    border-radius: 8px;
    margin: 20px 0;
  }
  
  .result-box h3 {
    color: #00d4aa;
    font-size: 18px;
    margin-bottom: 10px;
  }
  
  .result-box .result-value {
    font-size: 28px;
    font-weight: bold;
    color: #ffffff;
  }
  
  ul { 
    list-style: none; 
    margin-top: 15px;
  }
  
  li { 
    padding: 15px; 
    margin: 10px 0;
    background: #0f1420;
    border-radius: 8px;
    border-left: 3px solid #00d4aa;
    transition: all 0.3s ease;
  }
  
  li:hover {
    background: #13192e;
    transform: translateX(5px);
  }
  
  li .date {
    color: #8b93a7;
    font-size: 12px;
    margin-bottom: 5px;
  }
  
  li .content {
    color: #e0e6ed;
    font-size: 14px;
  }
  
  canvas { 
    width: 100% !important; 
    height: 400px !important;
    border-radius: 8px;
  }
  
  .chart-container {
    background: #0f1420;
    padding: 20px;
    border-radius: 12px;
    border: 1px solid #2a3150;
  }
  
  .label {
    display: block;
    color: #8b93a7;
    font-size: 13px;
    margin-bottom: 5px;
    font-weight: 500;
  }
  
  .btn-group {
    display: flex;
    gap: 10px;
    margin-top: 15px;
  }
  
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: #0f1420;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #2a3150;
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: #00d4aa;
  }
</style>
</head>
<body>

<div class="sidebar">
  <button id="dashboard-btn" class="active" title="Dashboard">üìä</button>
  <button id="post-btn" title="Gerador de Posts">‚úçÔ∏è</button>
  <button id="calc-btn" title="Calculadora de Lucro">üí∞</button>
  <button id="roi-btn" title="Calculadora de ROI">üìà</button>
  <button id="pdf-btn" title="Gerador de PDF">üìÑ</button>
</div>

<div class="main">
  <div class="header">
    <h1 id="page-title">Dashboard</h1>
    <div class="datetime" id="datetime"></div>
  </div>

  <!-- Dashboard Overview -->
  <div id="dashboard-service" class="service active">
    <div class="metrics-grid">
      <div class="metric-card">
        <h3>Total de Posts</h3>
        <div class="value" id="total-posts">0</div>
        <div class="change">üìù Posts criados</div>
      </div>
      <div class="metric-card">
        <h3>C√°lculos de Lucro</h3>
        <div class="value" id="total-calcs">0</div>
        <div class="change">üíµ An√°lises feitas</div>
      </div>
      <div class="metric-card">
        <h3>PDFs Gerados</h3>
        <div class="value" id="total-pdfs">0</div>
        <div class="change">üìë Documentos criados</div>
      </div>
      <div class="metric-card">
        <h3>ROI M√©dio</h3>
        <div class="value" id="avg-roi">0%</div>
        <div class="change">üìä Retorno sobre investimento</div>
      </div>
    </div>

    <div class="card chart-container">
      <h2>Evolu√ß√£o de Lucro (Estilo Binance)</h2>
      <canvas id="main-chart"></canvas>
    </div>
  </div>

  <!-- Gerador de Posts -->
  <div id="post-service" class="service card">
    <h2>Gerador de Posts Profissional</h2>
    <label class="label">T√≠tulo do Post</label>
    <input type="text" id="post-title" placeholder="Ex: Lan√ßamento do novo produto">
    
    <label class="label">Categoria</label>
    <select id="post-category">
      <option value="marketing">Marketing</option>
      <option value="vendas">Vendas</option>
      <option value="produto">Produto</option>
      <option value="anuncio">An√∫ncio</option>
      <option value="educacional">Educacional</option>
    </select>
    
    <label class="label">Conte√∫do do Post</label>
    <textarea id="post-text" rows="6" placeholder="Digite o conte√∫do do seu post aqui..."></textarea>
    
    <div class="btn-group">
      <button class="primary" onclick="savePost()">üíæ Salvar Post</button>
      <button class="secondary" onclick="clearPostForm()">üóëÔ∏è Limpar</button>
    </div>
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">Posts Salvos</h3>
    <ul id="post-list"></ul>
  </div>

  <!-- Calculadora de Margem/Lucro -->
  <div id="calc-service" class="service card">
    <h2>Calculadora de Margem e Lucro</h2>
    
    <div class="input-group">
      <div>
        <label class="label">Custo do Produto (R$)</label>
        <input type="number" id="cost" placeholder="Ex: 50.00" step="0.01">
      </div>
      <div>
        <label class="label">Pre√ßo de Venda (R$)</label>
        <input type="number" id="price" placeholder="Ex: 100.00" step="0.01">
      </div>
    </div>
    
    <div class="input-group">
      <div>
        <label class="label">Custos Adicionais (R$)</label>
        <input type="number" id="extra-costs" placeholder="Ex: 5.00" step="0.01" value="0">
      </div>
      <div>
        <label class="label">Impostos (%)</label>
        <input type="number" id="tax" placeholder="Ex: 15" step="0.1" value="0">
      </div>
    </div>
    
    <button class="primary" onclick="calculateMargin()">üßÆ Calcular Lucro Real</button>
    
    <div id="margin-result" class="result-box" style="display:none;">
      <h3>Resultado da An√°lise</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
          <div class="label">Margem de Lucro</div>
          <div class="result-value" id="margin-value">0%</div>
        </div>
        <div>
          <div class="label">Lucro L√≠quido</div>
          <div class="result-value" id="profit-value">R$ 0,00</div>
        </div>
      </div>
    </div>
    
    <div class="chart-container" style="margin-top: 30px;">
      <h3 style="color: #ffffff; margin-bottom: 15px;">Hist√≥rico de Lucro (Candlestick)</h3>
      <canvas id="profit-chart"></canvas>
    </div>
  </div>

  <!-- Calculadora de ROI -->
  <div id="roi-service" class="service card">
    <h2>Calculadora de ROI (Retorno sobre Investimento)</h2>
    
    <div class="input-group">
      <div>
        <label class="label">Investimento Inicial (R$)</label>
        <input type="number" id="investment" placeholder="Ex: 1000.00" step="0.01">
      </div>
      <div>
        <label class="label">Retorno Obtido (R$)</label>
        <input type="number" id="return" placeholder="Ex: 1500.00" step="0.01">
      </div>
    </div>
    
    <div class="input-group">
      <div>
        <label class="label">Per√≠odo (meses)</label>
        <input type="number" id="period" placeholder="Ex: 6" min="1">
      </div>
      <div>
        <label class="label">Tipo de Investimento</label>
        <select id="investment-type">
          <option value="marketing">Marketing Digital</option>
          <option value="produto">Desenvolvimento de Produto</option>
          <option value="infra">Infraestrutura</option>
          <option value="treinamento">Treinamento</option>
          <option value="outro">Outro</option>
        </select>
      </div>
    </div>
    
    <button class="primary" onclick="calculateROI()">üìä Calcular ROI</button>
    
    <div id="roi-result" class="result-box" style="display:none;">
      <h3>An√°lise de ROI</h3>
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 15px;">
        <div>
          <div class="label">ROI Total</div>
          <div class="result-value" id="roi-value">0%</div>
        </div>
        <div>
          <div class="label">ROI Mensal</div>
          <div class="result-value" id="roi-monthly">0%</div>
        </div>
        <div>
          <div class="label">Ganho L√≠quido</div>
          <div class="result-value" id="net-gain">R$ 0,00</div>
        </div>
      </div>
      <div style="margin-top: 15px; padding: 15px; background: rgba(0,212,170,0.05); border-radius: 8px;">
        <div class="label">An√°lise</div>
        <p id="roi-analysis" style="color: #e0e6ed; margin-top: 5px;"></p>
      </div>
    </div>
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">Hist√≥rico de ROIs</h3>
    <ul id="roi-list"></ul>
  </div>

  <!-- Gerador de PDF -->
  <div id="pdf-service" class="service card">
    <h2>Gerador de PDF Profissional</h2>
    
    <label class="label">T√≠tulo do Documento</label>
    <input type="text" id="pdf-title" placeholder="Ex: Relat√≥rio Mensal de Vendas">
    
    <label class="label">Tipo de Documento</label>
    <select id="pdf-type">
      <option value="relatorio">Relat√≥rio</option>
      <option value="proposta">Proposta Comercial</option>
      <option value="contrato">Contrato</option>
      <option value="nota">Nota T√©cnica</option>
    </select>
    
    <label class="label">Autor</label>
    <input type="text" id="pdf-author" placeholder="Seu nome ou empresa">
    
    <label class="label">Conte√∫do do Documento</label>
    <textarea id="pdf-text" rows="8" placeholder="Digite o conte√∫do detalhado do documento..."></textarea>
    
    <div class="btn-group">
      <button class="primary" onclick="generatePDF()">üìÑ Gerar PDF</button>
      <button class="secondary" onclick="clearPDFForm()">üóëÔ∏è Limpar</button>
    </div>
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">PDFs Gerados Recentemente</h3>
    <ul id="pdf-list"></ul>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.1.0"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  // ==================== NAVIGATION ====================
  const dashboardBtn = document.getElementById('dashboard-btn');
  const postBtn = document.getElementById('post-btn');
  const calcBtn = document.getElementById('calc-btn');
  const roiBtn = document.getElementById('roi-btn');
  const pdfBtn = document.getElementById('pdf-btn');
  
  const services = {
    dashboard: document.getElementById('dashboard-service'),
    post: document.getElementById('post-service'),
    calc: document.getElementById('calc-service'),
    roi: document.getElementById('roi-service'),
    pdf: document.getElementById('pdf-service')
  };

  const pageTitles = {
    dashboard: 'Dashboard',
    post: 'Gerador de Posts',
    calc: 'Calculadora de Lucro',
    roi: 'Calculadora de ROI',
    pdf: 'Gerador de PDF'
  };

  function setActive(service) {
    for(let key in services) services[key].classList.remove('active');
    services[service].classList.add('active');
    
    dashboardBtn.classList.remove('active');
    postBtn.classList.remove('active');
    calcBtn.classList.remove('active');
    roiBtn.classList.remove('active');
    pdfBtn.classList.remove('active');
    
    if(service==='dashboard') dashboardBtn.classList.add('active');
    if(service==='post') postBtn.classList.add('active');
    if(service==='calc') calcBtn.classList.add('active');
    if(service==='roi') roiBtn.classList.add('active');
    if(service==='pdf') pdfBtn.classList.add('active');
    
    document.getElementById('page-title').textContent = pageTitles[service];
    
    if(service === 'dashboard') updateDashboard();
  }

  dashboardBtn.onclick = ()=>setActive('dashboard');
  postBtn.onclick = ()=>setActive('post');
  calcBtn.onclick = ()=>setActive('calc');
  roiBtn.onclick = ()=>setActive('roi');
  pdfBtn.onclick = ()=>setActive('pdf');

  // ==================== DATE TIME ====================
  function updateDateTime() {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
    document.getElementById('datetime').textContent = now.toLocaleDateString('pt-BR', options);
  }
  updateDateTime();
  setInterval(updateDateTime, 60000);

  // ==================== DASHBOARD ====================
  let mainChart = null;

  function updateDashboard() {
    const posts = JSON.parse(localStorage.getItem('posts')||'[]');
    const calcs = JSON.parse(localStorage.getItem('calcs')||'[]');
    const pdfs = JSON.parse(localStorage.getItem('pdfs')||'[]');
    const rois = JSON.parse(localStorage.getItem('rois')||'[]');
    
    document.getElementById('total-posts').textContent = posts.length;
    document.getElementById('total-calcs').textContent = calcs.length;
    document.getElementById('total-pdfs').textContent = pdfs.length;
    
    const avgRoi = rois.length > 0 
      ? (rois.reduce((sum, r) => sum + parseFloat(r.roi), 0) / rois.length).toFixed(1)
      : '0';
    document.getElementById('avg-roi').textContent = avgRoi + '%';
    
    // Main Chart - Candlestick com dados reais
    const ctx = document.getElementById('main-chart').getContext('2d');
    
    if(mainChart) mainChart.destroy();
    
    const chartData = calcs.length > 0 
      ? calcs.slice(-10).map((c, i) => ({
          x: new Date(c.date).toLocaleDateString('pt-BR', { month: 'short', day: 'numeric' }),
          o: parseFloat(c.cost),
          h: Math.max(parseFloat(c.cost), parseFloat(c.netProfit) + parseFloat(c.cost)),
          l: Math.min(parseFloat(c.cost), parseFloat(c.netProfit)),
          c: parseFloat(c.netProfit) + parseFloat(c.cost)
        }))
      : [
          { x: 'Sem dados', o: 0, h: 0, l: 0, c: 0 }
        ];
    
    mainChart = new Chart(ctx, {
      type: 'candlestick',
      data: {
        datasets: [{
          label: 'Lucro',
          data: chartData,
          color: {
            up: '#00d4aa',
            down: '#ff5370',
            unchanged: '#8b93a7'
          }
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#1a1f3a',
            titleColor: '#ffffff',
            bodyColor: '#e0e6ed',
            borderColor: '#00d4aa',
            borderWidth: 1
          }
        },
        scales: {
          x: { 
            ticks: { color: '#8b93a7' },
            grid: { color: '#1a1f3a' }
          },
          y: { 
            ticks: { color: '#8b93a7' },
            grid: { color: '#1a1f3a' }
          }
        }
      }
    });
  }

  // ==================== POSTS ====================
  function savePost() {
    const title = document.getElementById('post-title').value.trim();
    const text = document.getElementById('post-text').value.trim();
    const category = document.getElementById('post-category').value;
    
    if(!title || !text) return alert('‚ö†Ô∏è Preencha t√≠tulo e conte√∫do!');
    
    let posts = JSON.parse(localStorage.getItem('posts')||'[]');
    posts.push({ title, text, category, date: new Date().toISOString() });
    localStorage.setItem('posts', JSON.stringify(posts));
    
    loadPosts();
    clearPostForm();
    alert('‚úÖ Post salvo com sucesso!');
  }

  function loadPosts() {
    const list = document.getElementById('post-list');
    list.innerHTML = '';
    let posts = JSON.parse(localStorage.getItem('posts')||'[]');
    
    if(posts.length === 0) {
      list.innerHTML = '<li><div class="content">Nenhum post criado ainda.</div></li>';
      return;
    }
    
    posts.reverse().forEach((p, i) => {
      const li = document.createElement('li');
      li.innerHTML = `
        <div class="date">${new Date(p.date).toLocaleString('pt-BR')} ‚Ä¢ ${p.category}</div>
        <div class="content"><strong>${p.title}</strong></div>
        <div class="content" style="margin-top: 8px; color: #8b93a7;">${p.text}</div>
      `;
      list.appendChild(li);
    });
  }

  function clearPostForm() {
    document.getElementById('post-title').value = '';
    document.getElementById('post-text').value = '';
    document.getElementById('post-category').value = 'marketing';
  }

  loadPosts();

  // ==================== CALCULATOR ====================
  let profitChart = null;

  function calculateMargin() {
    const cost = parseFloat(document.getElementById('cost').value);
    const price = parseFloat(document.getElementById('price').value);
    const extraCosts = parseFloat(document.getElementById('extra-costs').value) || 0;
    const tax = parseFloat(document.getElementById('tax').value) || 0;
    
    if(isNaN(cost) || isNaN(price) || cost <= 0 || price <= 0) {
      return alert('‚ö†Ô∏è Digite valores v√°lidos para custo e pre√ßo!');
    }
    
    if(price <= cost) {
      alert('‚ö†Ô∏è O pre√ßo de venda deve ser maior que o custo!');
    }
    
    // C√°lculos reais
    const totalCost = cost + extraCosts;
    const taxAmount = (price * tax) / 100;
    const netProfit = price - totalCost - taxAmount;
    const margin = ((netProfit / price) * 100).toFixed(2);
    
    document.getElementById('margin-result').style.display = 'block';
    document.getElementById('margin-value').textContent = margin + '%';
    document.getElementById('profit-value').textContent = 'R$ ' + netProfit.toFixed(2);
    
    // Salvar c√°lculo
    let calcs = JSON.parse(localStorage.getItem('calcs')||'[]');
    calcs.push({
      cost: cost.toFixed(2),
      price: price.toFixed(2),
      extraCosts: extraCosts.toFixed(2),
      tax: tax.toFixed(2),
      netProfit: netProfit.toFixed(2),
      margin: margin,
      date: new Date().toISOString()
    });
    localStorage.setItem('calcs', JSON.stringify(calcs));
    
    updateProfitChart(calcs);
    updateDashboard();
  }

  function updateProfitChart(calcs) {
    const ctx = document.getElementById('profit-chart').getContext('2d');
    
    if(profitChart) profitChart.destroy();
    
    const last10 = calcs.slice(-10);
    const chartData = last10.map((c, i) => ({
      x: new Date(c.date).toLocaleDateString('pt-BR', { month: 'short', day: 'numeric' }),
      o: parseFloat(c.cost),
      h: Math.max(parseFloat(c.cost), parseFloat(c.netProfit) + parseFloat(c.cost)),
      l: Math.min(parseFloat(c.cost), parseFloat(c.netProfit)),
      c: parseFloat(c.netProfit) + parseFloat(c.cost)
    }));
    
    profitChart = new Chart(ctx, {
      type: 'candlestick',
      data: {
        datasets: [{
          label: 'Lucro',
          data: chartData,
          color: {
            up: '#00d4aa',
            down: '#ff5370',
            unchanged: '#8b93a7'
          }
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#1a1f3a',
            titleColor: '#ffffff',
            bodyColor: '#e0e6ed',
            borderColor: '#00d4aa',
            borderWidth: 1
          }
        },
        scales: {
          x: { 
            ticks: { color: '#8b93a7' },
            grid: { color: '#1a1f3a' }
          },
          y: { 
            ticks: { color: '#8b93a7' },
            grid: { color: '#1a1f3a' }
          }
        }
      }
    });
  }

  // ==================== ROI CALCULATOR ====================
  function calculateROI() {
    const investment = parseFloat(document.getElementById('investment').value);
    const returnValue = parseFloat(document.getElementById('return').value);
    const period = parseInt(document.getElementById('period').value);
    const type = document.getElementById('investment-type').value;
    
    if(isNaN(investment) || isNaN(returnValue) || isNaN(period) || investment <= 0 || period <= 0) {
      return alert('‚ö†Ô∏è Preencha todos os campos com valores v√°lidos!');
    }
    
    const netGain = returnValue - investment;
    const roi = ((netGain / investment) * 100).toFixed(2);
    const roiMonthly = (roi / period).toFixed(2);
    
    document.getElementById('roi-result').style.display = 'block';
    document.getElementById('roi-value').textContent = roi + '%';
    document.getElementById('roi-monthly').textContent = roiMonthly + '%/m√™s';
    document.getElementById('net-gain').textContent = 'R$ ' + netGain.toFixed(2);
    
    // An√°lise
    let analysis = '';
    if(roi > 50) analysis = 'üöÄ Excelente! ROI muito acima da m√©dia. Investimento altamente rent√°vel.';
    else if(roi > 20) analysis = '‚úÖ Muito bom! ROI positivo e saud√°vel para o neg√≥cio.';
    else if(roi > 0) analysis = 'üëç Positivo. O investimento est√° gerando retorno, mas pode melhorar.';
    else analysis = '‚ö†Ô∏è Aten√ß√£o! ROI negativo. Revise a estrat√©gia de investimento.';
    
    document.getElementById('roi-analysis').textContent = analysis;
    
    // Salvar ROI
    let rois = JSON.parse(localStorage.getItem('rois')||'[]');
    rois.push({
      investment: investment.toFixed(2),
      return: returnValue.toFixed(2),
      period,
      type,
      roi,
      roiMonthly,
      netGain: netGain.toFixed(2),
      date: new Date().toISOString()
    });
    localStorage.setItem('rois', JSON.stringify(rois));
    
    loadROIs();
    updateDashboard();
  }

  function loadROIs() {
    const list = document.getElementById('roi-list');
    list.innerHTML = '';
    let rois = JSON.parse(localStorage.getItem('rois')||'[]');
    
    if(rois.length === 0) {
      list.innerHTML = '<li><div class="content">Nenhum ROI calculado ainda.</div></li>';
      return;
    }
    
    rois.reverse().forEach(r => {
      const li = document.createElement('li');
      li.innerHTML = `
        <div class="date">${new Date(r.date).toLocaleString('pt-BR')} ‚Ä¢ ${r.type}</div>
        <div class="content"><strong>ROI: ${r.roi}%</strong> (${r.roiMonthly}%/m√™s)</div>
        <div class="content" style="margin-top: 5px; color: #8b93a7;">
          Investimento: R$ ${r.investment} ‚Üí Retorno: R$ ${r.return} | Ganho: R$ ${r.netGain}
        </div>
      `;
      list.appendChild(li);
    });
  }

  loadROIs();

  // ==================== PDF GENERATOR ====================
  async function generatePDF() {
    const { jsPDF } = window.jspdf;
    const title = document.getElementById('pdf-title').value.trim();
    const type = document.getElementById('pdf-type').value;
    const author = document.getElementById('pdf-author').value.trim();
    const text = document.getElementById('pdf-text').value.trim();
    
    if(!title || !text) return alert('‚ö†Ô∏è Preencha t√≠tulo e conte√∫do!');
    
    const doc = new jsPDF();
    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();
    const margin = 20;
    const maxWidth = pageWidth - 2 * margin;
    
    // Header
    doc.setFillColor(0, 212, 170);
    doc.rect(0, 0, pageWidth, 30, 'F');
    doc.setTextColor(255, 255, 255);
    doc.setFontSize(20);
    doc.setFont(undefined, 'bold');
    doc.text(title, margin, 20);
    
    // Metadata
    doc.setTextColor(10, 14, 39);
    doc.setFontSize(10);
    doc.setFont(undefined, 'normal');
    let yPos = 45;
    doc.text(`Tipo: ${type.charAt(0).toUpperCase() + type.slice(1)}`, margin, yPos);
    yPos += 6;
    doc.text(`Data: ${new Date().toLocaleDateString('pt-BR')}`, margin, yPos);
    yPos += 6;
    if(author) {
      doc.text(`Autor: ${author}`, margin, yPos);
      yPos += 6;
    }
    
    // Line separator
    doc.setDrawColor(0, 212, 170);
    doc.setLineWidth(0.5);
    doc.line(margin, yPos + 2, pageWidth - margin, yPos + 2);
    yPos += 10;
    
    // Content
    doc.setFontSize(12);
    doc.setTextColor(50, 50, 50);
    const lines = doc.splitTextToSize(text, maxWidth);
    
    lines.forEach(line => {
      if(yPos > pageHeight - 30) {
        doc.addPage();
        yPos = 20;
      }
      doc.text(line, margin, yPos);
      yPos += 7;
    });
    
    // Footer
    const pageCount = doc.internal.getNumberOfPages();
    for(let i = 1; i <= pageCount; i++) {
      doc.setPage(i);
      doc.setFontSize(8);
      doc.setTextColor(150, 150, 150);
      doc.text(
        `P√°gina ${i} de ${pageCount} | Gerado em ${new Date().toLocaleString('pt-BR')}`,
        pageWidth / 2,
        pageHeight - 10,
        { align: 'center' }
      );
    }
